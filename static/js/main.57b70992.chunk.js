(this["webpackJsonpgood-listens"]=this["webpackJsonpgood-listens"]||[]).push([[0],{150:function(e,a,t){},151:function(e,a,t){"use strict";t.r(a);var s=t(1),n=t.n(s),c=t(41),r=t.n(c),i=t(0),l=t.n(i),o=t(5),u=t(9),d=t(29),j=t(4),b=function(e){var a=e.term,t=e.setTerm;return Object(j.jsx)("div",{className:"search",children:Object(j.jsxs)("div",{className:"searchInputs",children:[Object(j.jsx)("input",{className:"searchBar",type:"text",placeholder:"Search Songs...",value:a,onChange:function(e){t(e.target.value)}}),Object(j.jsx)(d.g,{className:"searchIcon"})]})})},g=t(159),m=t(157),h=t(160),f=t(51),O=function(e){var a=e.logo,t=e.user,s=e.login,n=e.logout,c=(e.setlang,e.searchTerm),r=e.setSearchTerm;e.search;return Object(j.jsx)(g.a,{className:"navbar",bg:"dark",variant:"dark",expand:"lg",children:Object(j.jsxs)(m.a,{className:"container-fluid",children:[Object(j.jsxs)(g.a.Brand,{className:"navbar-brand",href:"/D12A_IP_GoodListens",children:[Object(j.jsx)("img",{alt:"Good Listens Logo",src:a,width:"100",height:"100",className:"d-inline-block align-center"}),"GoodListens"]}),Object(j.jsx)(g.a.Toggle,{"aria-controls":"basic-navbar-nav",className:"toggle"}),Object(j.jsx)(g.a.Collapse,{id:"basic-navbar-nav",className:"justify-content-end",children:Object(j.jsxs)(h.a,{className:"nav justify-content-end",children:[Object(j.jsx)(f.b,{className:"nav-link",to:"/D12A_IP_GoodListens",children:" Home "}),Object(j.jsx)(f.b,{className:"nav-link",to:"/D12A_IP_GoodListens/about",children:" About "}),t?Object(j.jsx)(h.a.Link,{className:"nav-link",onClick:n,children:" Sign Out "}):Object(j.jsx)(h.a.Link,{className:"nav-link",onClick:s,children:" Sign In "}),Object(j.jsx)("form",{children:Object(j.jsx)(b,{SearchBar:b,term:c,setTerm:r})})]})})]})})},p=function(){return Object(j.jsx)("div",{className:"footer",children:"D12A IP GoodListens 2021"})},x=t.p+"static/media/logo.585afbed.png",N=t(3),v=t(80),_=t.n(v),y=function(e){var a=e.click,t=e.setClick,n=e.data,c=(e.dataArr,e.updateRating),r=e.user,i=Object(s.useState)(0),l=Object(u.a)(i,2),o=l[0],b=l[1],g=Object(s.useState)(0),m=Object(u.a)(g,2),h=m[0],f=m[1],O=r?r.uid:null,p=!isNaN(a)&&n.user_rating&&O in n.user_rating?n.user_rating[O]:0,x=isNaN(a)?null:Object(j.jsx)(_.a,{count:5,onChange:function(e){if(c(n.id,e),n.user_rating?n.user_rating[O]=e:n.user_rating=Object(N.a)({},O,e),!isNaN(a)&&n.user_rating){b(Object.keys(n.user_rating).length);var t=0;for(var s in n.user_rating)t+=n.user_rating[s];f(parseFloat((t/o).toFixed(1)))}else b(0),f(0)},size:20,isHalf:!0,value:p,classNames:"react-stars"});return Object(s.useEffect)((function(){if(!isNaN(a)&&n.user_rating){b(Object.keys(n.user_rating).length);var e=0;for(var t in n.user_rating)e+=n.user_rating[t];f(parseFloat((e/o).toFixed(1)))}else b(0),f(0)}),[n,o,a]),Object(j.jsxs)("div",{className:"view child",style:{display:"".concat(isNaN(a)?"none":"flex")},children:[Object(j.jsx)(d.f,{className:"closeIcon",onClick:function(){return t(NaN)}}),Object(j.jsxs)("div",{className:"card-component",children:[Object(j.jsx)("div",{className:"card-img-wrapper",children:Object(j.jsx)("img",{alt:"card-img",src:isNaN(a)?"":n.image,className:"card-img"})}),Object(j.jsxs)("div",{className:"card-text",children:[Object(j.jsxs)("div",{className:"song-header",children:[Object(j.jsxs)("h2",{children:[" ",isNaN(a)?"":n.name," "]}),Object(j.jsxs)("h5",{children:[" Artist - ",Object(j.jsx)("span",{className:"greyscale",children:isNaN(a)?"":n.artist})," "]}),Object(j.jsxs)("h5",{children:[" Album - ",Object(j.jsx)("span",{className:"greyscale",children:isNaN(a)?"":n.album}),"  "]}),Object(j.jsxs)("h5",{children:[" Release Date - ",Object(j.jsx)("span",{className:"greyscale",children:isNaN(a)?"":n.release_date}),"  "]})]}),Object(j.jsxs)("div",{className:"ratings",children:[Object(j.jsxs)("div",{className:"rating-wrapper",children:[Object(j.jsx)("p",{children:"Your Rating:"}),r?Object(j.jsx)("div",{children:x}):Object(j.jsx)("p",{className:"sign-in-warning",children:"Sign In to rate"})]}),Object(j.jsxs)("div",{className:"rating-wrapper",children:[Object(j.jsx)("p",{children:" Overall Rating: "}),Object(j.jsx)(_.a,{count:1,size:20,edit:!1,value:1,className:"react-star"}),Object(j.jsxs)("p",{children:[h," (",o,")"]})]})]}),Object(j.jsx)("div",{className:"play-icon-wrapper",children:Object(j.jsx)("a",{href:isNaN(a)?"/":n.url,children:Object(j.jsx)(d.e,{className:"play-icon"})})})]})]})]})},k=t(42),w=t(81),A=t(74);w.initializeApp({apiKey:"AIzaSyAet6gHh72xSAlXNXUHejyTZzybRwe8L4M",authDomain:"good-listens-2885b.firebaseapp.com",projectId:"good-listens-2885b",storageBucket:"good-listens-2885b.appspot.com",messagingSenderId:"41185449889",appId:"1:41185449889:web:ffa9d80c9b4adc8d33dde0",measurementId:"G-3YP60LP1M1"});var S=new A.GoogleAuthProvider,C=A.getAuth(),I=A,D=k,B=t(161),L=t(158),T=t(101),R=function(e){for(var a=e.dataArr,t=e.searchTerm,n=(e.lang,e.filteredData),c=e.setSortBy,r=e.setlang,i=e.searchResults,b=e.updateRating,g=e.user,m=[],h=0;h<a.length;h++)m.push(a[h].id);var f=Object(s.useState)(NaN),O=Object(u.a)(f,2),p=O[0],x=O[1],N=Object(s.useState)([]),v=Object(u.a)(N,2),_=v[0],w=v[1],A=Object(s.useState)(1),S=Object(u.a)(A,2),C=S[0],I=S[1],R=Object(s.useState)(!1),G=Object(u.a)(R,2),z=G[0],E=G[1],P=n.length%12===0?n.length/12:Math.round(n.length/12)+1,H=function(){var e=Object(o.a)(l.a.mark((function e(a){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=D.getDatabase(),Object(k.set)(Object(k.ref)(t,"spotify/"+a.id),{album:a.album,image:a.image,artist:a.artist,release_date:a.release_date,album_type:a.album_type,name:a.name,language:"undefined",url:a.url,user_rating:{}}),console.log("Data added successfully");case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();Object(s.useEffect)((function(){""===t&&0===t.length?E(!1):t.length>0&&E(!0)}),[t]);var U=_.map((function(e,a){return Object(j.jsx)("div",{className:"col-md-3",children:Object(j.jsxs)(B.a,{onClick:function(){x(a)},children:[Object(j.jsx)(B.a.Img,{variant:"top",src:e.image}),Object(j.jsx)(B.a.Body,{className:"bg-dark",children:Object(j.jsx)(B.a.Title,{className:"center card-tile",children:e.name})})]})},a)})),F=i.map((function(e,t){return Object(j.jsx)("div",{className:"col-md-3",children:Object(j.jsxs)(B.a,{onClick:function(){return function(e,t){if(x(t),m.includes(e.id)){console.log("Data is already in Database");for(var s=0;s<a.length;s++)a[s].id===e.id&&(e.user_rating=a[s].user_rating)}else console.log("Data not in database"),H(e)}(e,t)},children:[Object(j.jsx)(B.a.Img,{variant:"top",src:e.image}),Object(j.jsx)(B.a.Body,{className:"bg-dark",children:Object(j.jsx)(B.a.Title,{className:"center card-title",children:e.name})})]})},t)}));return Object(s.useEffect)((function(){w(n.slice(12*(C-1),12*(C-1)+12))}),[C,n]),Object(j.jsxs)("div",{className:"container-fluid bodyContainer",children:[Object(j.jsxs)("div",{className:"tableContainer",children:[Object(j.jsxs)("div",{className:"pageBtnContainer",children:[Object(j.jsx)("div",{className:"pageBtn",onClick:function(){I(C>1?C-1:P)},children:Object(j.jsx)(d.a,{size:30,color:"orange",className:"pageBtnIcon"})}),Object(j.jsxs)(L.a,{id:"dropdown-basic-button",align:"end",title:"Language",children:[Object(j.jsx)(T.a.Item,{className:"languageDropdown",onClick:function(){return r("English")},children:"English"}),Object(j.jsx)(T.a.Item,{className:"languageDropdown",onClick:function(){return r("Hindi")},children:"Hindi"})]}),Object(j.jsxs)(L.a,{id:"dropdown-basic-button",align:"end",title:"Sort By",children:[Object(j.jsx)(T.a.Item,{className:"languageDropdown",onClick:function(){return c("name")},children:"Name"}),Object(j.jsx)(T.a.Item,{className:"languageDropdown",onClick:function(){return c("artist")},children:"Artist"}),g?Object(j.jsx)(T.a.Item,{className:"languageDropdown",onClick:function(){return c("user")},children:"Your Rating"}):null,Object(j.jsx)(T.a.Item,{className:"languageDropdown",onClick:function(){return c("average")},children:"Top Rating"})]}),Object(j.jsx)("div",{className:"pageBtn",onClick:function(){I(C<P?C+1:1)},children:Object(j.jsx)(d.b,{size:30,color:"orange",className:"pageBtnIcon"})})]}),Object(j.jsx)("div",{className:"row",children:z?F:U})]}),Object(j.jsx)("div",{className:"parent",children:Object(j.jsx)(y,{click:p,setClick:x,data:z?i[p]:_[p],dataArr:a,updateRating:b,user:g})})]})},G=function(){return Object(j.jsx)("section",{className:"about",children:Object(j.jsx)("div",{className:"aboutUsContainer",children:Object(j.jsxs)("div",{className:"innerContainer",children:[Object(j.jsx)("h1",{children:"About Us"}),Object(j.jsx)("p",{className:"text",children:"Goodlistens provides the top rated songs for you. It provides you with the details for Artists, Album name, rating given by other Listeners."}),Object(j.jsx)("p",{className:"text",children:"If you wanna listen to your favourite song just click on the headphone button which directly takes you to spotify web to enjoy your music."}),Object(j.jsx)("h2",{children:"Contact Us On"}),Object(j.jsxs)("div",{className:"container-fluid",children:[Object(j.jsx)("a",{href:"https://github.com/Anurag-Saraswat-01/D12A_IP_GoodListens",target:"_blank",rel:"noopener noreferrer",style:{color:"white"}}),Object(j.jsx)(d.d,{className:"icons",size:30}),Object(j.jsx)(d.c,{className:"icons",size:30}),Object(j.jsx)(d.h,{className:"icons",size:30})]})]})})})},z=t(19),E=t(82),P=t.n(E),H=t(100),U=t.n(H);var F=function(){var e=Object(s.useState)([]),a=Object(u.a)(e,2),t=a[0],n=a[1],c=Object(s.useState)([]),r=Object(u.a)(c,2),i=r[0],d=r[1],b=Object(s.useState)(null),g=Object(u.a)(b,2),m=g[0],h=g[1],N=Object(s.useState)(""),v=Object(u.a)(N,2),_=v[0],y=v[1],w=Object(s.useState)("English"),A=Object(u.a)(w,2),B=A[0],L=A[1],T=Object(s.useState)("name"),E=Object(u.a)(T,2),H=E[0],F=E[1],J="e92ebaa8a3d1456fb1ab78acfe75fec7",V=function(){var e=Object(o.a)(l.a.mark((function e(a){var t,s,c,r,i,o,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=_.replace(/ /g,"%20"),"track","US","12","0",s="https://api.spotify.com/v1/search?q=".concat(t,"&type=").concat("track","&market=").concat("US","&limit=").concat("12","&offset=").concat("0"),c={headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+a}},e.next=9,P.a.get(s,c);case 9:if((r=e.sent).data)for(i=r.data.tracks.limit,o=[],u=0;u<i;u++)try{o.push({id:r.data.tracks.items[u].id,name:r.data.tracks.items[u].name,album_type:r.data.tracks.items[u].album.type,album:r.data.tracks.items[u].album.name,artist:r.data.tracks.items[u].artists[0].name,image:r.data.tracks.items[u].album.images[1].url,language:"English",release_date:r.data.tracks.items[u].album.release_date,url:r.data.tracks.items[u].uri,user_rating:null}),n(o),0===_.length&&n([])}catch(l){console.log(l)}case 11:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();Object(s.useEffect)((function(){_.length>0&&function(){var e={headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+btoa(J+":f2cdafb887294ee1a158d5905cc89f4d")}},a={grant_type:"client_credentials",refresh_token:"AQARwB4kcc2WGbbRcpuusCC0dccDVFqSwWh7ea6ewTY5-lYsJAcV8gB0u29DAJDk__QSKOqRfTL2Zo5A_AJ0NaS157pFBhvuD2qcN8jXNc9088_K5W4hUXVLVtXxHTStO8Q",client_id:J};P.a.post("https://accounts.spotify.com/api/token",U.a.stringify(a),e).then((function(e){V(e.data.access_token)})).catch((function(e){return console.log(e)}))}()}),[_]);var X=function(){var e=Object(o.a)(l.a.mark((function e(a){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=D.getDatabase(),Object(k.set)(Object(k.ref)(t,"spotify/"+a.id),{album:a.album_name,image:a.image,artist:a.artist,release_date:a.release_date,album_type:a.album_type,name:a.name,language:"English",url:a.url,user_rating:{}}),console.log("Data added successfully");case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),Y=function(){var e=D.getDatabase(),a=D.ref(e);D.onValue(D.child(a,"spotify/"),(function(e){if(e.exists()){var a=e.val(),t=[];for(var s in a)t.push({id:s,name:a[s].name,album_type:a[s].album_type,album:a[s].album,artist:a[s].artist,image:a[s].image,language:a[s].language,release_date:a[s].release_date,url:a[s].url,user_rating:"user_rating"in a[s]?a[s].user_rating:null});switch(H){case"name":d(t.sort((function(e,a){return"".concat(e.name).localeCompare("".concat(a.name))})));break;case"artist":d(t.sort((function(e,a){return"".concat(e.artist).localeCompare("".concat(a.artist))})));break;case"user":t=t.filter((function(e){return e.user_rating&&m.uid in e.user_rating})),d(t.sort((function(e,a){return a.user_rating[m.uid]-e.user_rating[m.uid]})));break;case"average":var n=function(e){var a;if(e.user_rating){var t=Object.keys(e.user_rating).length,s=0;for(var n in e.user_rating)s+=e.user_rating[n];a=s/t}else a=0;return a};d(t.sort((function(e,a){return n(a)-n(e)})))}}else alert("No data")}))},q=function(e,a){var t=D.getDatabase(),s=D.ref(t),n={};n["spotify/"+e+"/user_rating/".concat(m.uid)]=a,D.update(s,n),Y()};return Object(s.useEffect)((function(){I.onAuthStateChanged(C,(function(e){e&&h(e)}))})),Object(s.useEffect)((function(){Y()}),[H]),Object(j.jsx)(f.a,{children:Object(j.jsxs)("div",{className:"container-fluid",onLoad:Y,children:[Object(j.jsx)(O,{logo:x,user:m,setlang:L,login:function(){I.signInWithPopup(C,S).then((function(e){if(e.user){var a=e.user;h(a)}}))},logout:function(){I.signOut(C).then((function(){h(null)}))},searchTerm:_,setSearchTerm:y}),Object(j.jsx)(z.a,{path:"/D12A_IP_GoodListens",exact:!0,render:function(){return Object(j.jsx)(R,{dataArr:i,setlang:L,filteredData:i.filter((function(e){return e.language===B})),setSortBy:F,searchResults:t,lang:B,searchTerm:_,updateRating:q,user:m,insert:X})}}),Object(j.jsx)(z.a,{path:"/D12A_IP_GoodListens/about",component:G}),Object(j.jsx)(p,{})]})})};t(149),t(150);r.a.render(Object(j.jsx)(n.a.StrictMode,{children:Object(j.jsx)(F,{})}),document.getElementById("root"))}},[[151,1,2]]]);
//# sourceMappingURL=main.57b70992.chunk.js.map
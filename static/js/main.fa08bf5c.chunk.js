(this["webpackJsonpgood-listens"]=this["webpackJsonpgood-listens"]||[]).push([[0],{150:function(e,a,t){},151:function(e,a,t){"use strict";t.r(a);var n=t(1),s=t.n(n),c=t(41),r=t.n(c),i=t(0),l=t.n(i),o=t(5),u=t(9),d=t(29),j=t(4),b=function(e){var a=e.term,t=e.setTerm;return Object(j.jsx)("div",{className:"search",children:Object(j.jsxs)("div",{className:"searchInputs",children:[Object(j.jsx)("input",{className:"searchBar",type:"text",placeholder:"Search Songs...",value:a,onChange:function(e){t(e.target.value)}}),Object(j.jsx)(d.g,{className:"searchIcon"})]})})},g=t(159),m=t(157),h=t(160),f=t(51),O=function(e){var a=e.logo,t=e.user,n=e.login,s=e.logout,c=(e.setlang,e.searchTerm),r=e.setSearchTerm;e.search;return Object(j.jsx)(g.a,{className:"navbar",bg:"dark",variant:"dark",expand:"lg",children:Object(j.jsxs)(m.a,{className:"container-fluid",children:[Object(j.jsxs)(g.a.Brand,{className:"navbar-brand",href:"#home",children:[Object(j.jsx)("img",{alt:"Good Listens Logo",src:a,width:"100",height:"100",className:"d-inline-block align-center"}),"GoodListens"]}),Object(j.jsx)(g.a.Toggle,{"aria-controls":"basic-navbar-nav",className:"toggle"}),Object(j.jsx)(g.a.Collapse,{id:"basic-navbar-nav",className:"justify-content-end",children:Object(j.jsxs)(h.a,{className:"nav justify-content-end",children:[Object(j.jsx)(f.b,{className:"nav-link",to:"/",children:" Home "}),Object(j.jsx)(f.b,{className:"nav-link",to:"/about",children:" About "}),t?Object(j.jsx)(h.a.Link,{className:"nav-link",onClick:s,children:" Sign Out "}):Object(j.jsx)(h.a.Link,{className:"nav-link",onClick:n,children:" Sign In "}),Object(j.jsx)("form",{children:Object(j.jsx)(b,{SearchBar:b,term:c,setTerm:r})})]})})]})})},p=function(){return Object(j.jsx)("div",{className:"footer",children:"D12A IP GoodListens 2021"})},x=t.p+"static/media/logo.585afbed.png",N=t(3),v=t(80),y=t.n(v),k=function(e){var a=e.click,t=e.setClick,s=e.data,c=(e.dataArr,e.updateRating),r=e.user,i=Object(n.useState)(0),l=Object(u.a)(i,2),o=l[0],b=l[1],g=Object(n.useState)(0),m=Object(u.a)(g,2),h=m[0],f=m[1],O=r?r.uid:null,p=!isNaN(a)&&s.user_rating&&O in s.user_rating?s.user_rating[O]:0,x=isNaN(a)?null:Object(j.jsx)(y.a,{count:5,onChange:function(e){if(c(s.id,e),console.log(s),s.user_rating?s.user_rating[O]=e:s.user_rating=Object(N.a)({},O,e),!isNaN(a)&&s.user_rating){b(Object.keys(s.user_rating).length);var t=0;for(var n in s.user_rating)t+=s.user_rating[n];f(t/o)}else b(0),f(0)},size:20,isHalf:!0,value:p,classNames:"react-stars"});return Object(n.useEffect)((function(){if(!isNaN(a)&&s.user_rating){b(Object.keys(s.user_rating).length);var e=0;for(var t in s.user_rating)e+=s.user_rating[t];f(e/o)}else b(0),f(0)}),[s,o,a]),Object(j.jsxs)("div",{className:"view child",style:{display:"".concat(isNaN(a)?"none":"flex")},children:[Object(j.jsx)(d.f,{className:"closeIcon",onClick:function(){return t(NaN)}}),Object(j.jsxs)("div",{className:"card-component",children:[Object(j.jsx)("div",{className:"card-img-wrapper",children:Object(j.jsx)("img",{alt:"card-img",src:isNaN(a)?"":s.image,className:"card-img"})}),Object(j.jsxs)("div",{className:"card-text",children:[Object(j.jsxs)("div",{className:"song-header",children:[Object(j.jsxs)("h2",{children:[" ",isNaN(a)?"":s.name," "]}),Object(j.jsxs)("h5",{children:[" Artist - ",Object(j.jsx)("span",{className:"greyscale",children:isNaN(a)?"":s.artist})," "]}),Object(j.jsxs)("h5",{children:[" Album - ",Object(j.jsx)("span",{className:"greyscale",children:isNaN(a)?"":s.album}),"  "]}),Object(j.jsxs)("h5",{children:[" Release Date - ",Object(j.jsx)("span",{className:"greyscale",children:isNaN(a)?"":s.release_date}),"  "]})]}),Object(j.jsxs)("div",{className:"ratings",children:[Object(j.jsxs)("div",{className:"rating-wrapper",children:[Object(j.jsx)("p",{children:"Your Rating:"}),r?Object(j.jsx)("div",{children:x}):Object(j.jsx)("p",{className:"sign-in-warning",children:"Sign In to rate"})]}),Object(j.jsxs)("div",{className:"rating-wrapper",children:[Object(j.jsx)("p",{children:" Overall Rating: "}),Object(j.jsx)(y.a,{count:1,size:20,edit:!1,value:1,className:"react-star"}),Object(j.jsxs)("p",{children:[h," (",o,")"]})]})]}),Object(j.jsx)("div",{className:"play-icon-wrapper",children:Object(j.jsx)("a",{href:isNaN(a)?"/":s.url,children:Object(j.jsx)(d.e,{className:"play-icon"})})})]})]})]})},_=t(42),w=t(81),S=t(74);w.initializeApp({apiKey:"AIzaSyAet6gHh72xSAlXNXUHejyTZzybRwe8L4M",authDomain:"good-listens-2885b.firebaseapp.com",projectId:"good-listens-2885b",storageBucket:"good-listens-2885b.appspot.com",messagingSenderId:"41185449889",appId:"1:41185449889:web:ffa9d80c9b4adc8d33dde0",measurementId:"G-3YP60LP1M1"});var C=new S.GoogleAuthProvider,A=S.getAuth(),I=S,D=_,B=t(161),T=t(158),R=t(101),L=function(e){for(var a=e.dataArr,t=e.searchTerm,s=(e.lang,e.filteredData),c=e.setSortBy,r=e.setlang,i=e.searchResults,b=e.updateRating,g=e.user,m=[],h=0;h<a.length;h++)m.push(a[h].id);var f=Object(n.useState)(NaN),O=Object(u.a)(f,2),p=O[0],x=O[1],N=Object(n.useState)([]),v=Object(u.a)(N,2),y=v[0],w=v[1],S=Object(n.useState)(1),C=Object(u.a)(S,2),A=C[0],I=C[1],L=Object(n.useState)(!1),z=Object(u.a)(L,2),E=z[0],G=z[1],H=s.length%12===0?s.length/12:Math.round(s.length/12)+1,U=function(){var e=Object(o.a)(l.a.mark((function e(a){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=D.getDatabase(),Object(_.set)(Object(_.ref)(t,"spotify/"+a.id),{album:a.album,image:a.image,artist:a.artist,release_date:a.release_date,album_type:a.album_type,name:a.name,language:"undefined",url:a.url,user_rating:{}}),console.log("Data added successfully");case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){""===t&&0===t.length?G(!1):t.length>0&&G(!0)}),[t]);var J=y.map((function(e,a){return Object(j.jsx)("div",{className:"col-md-3",children:Object(j.jsxs)(B.a,{onClick:function(){x(a)},children:[Object(j.jsx)(B.a.Img,{variant:"top",src:e.image}),Object(j.jsx)(B.a.Body,{className:"bg-dark",children:Object(j.jsx)(B.a.Title,{className:"center card-tile",children:e.name})})]})},a)})),P=i.map((function(e,t){return Object(j.jsx)("div",{className:"col-md-3",children:Object(j.jsxs)(B.a,{onClick:function(){return function(e,t){if(x(t),m.includes(e.id)){console.log("Data is already in Database");for(var n=0;n<a.length;n++)a[n].id===e.id&&(e.user_rating=a[n].user_rating)}else console.log("Data not in database"),U(e)}(e,t)},children:[Object(j.jsx)(B.a.Img,{variant:"top",src:e.image}),Object(j.jsx)(B.a.Body,{className:"bg-dark",children:Object(j.jsx)(B.a.Title,{className:"center card-title",children:e.name})})]})},t)}));return Object(n.useEffect)((function(){w(s.slice(12*(A-1),12*(A-1)+12))}),[A,s]),Object(j.jsxs)("div",{className:"container-fluid bodyContainer",children:[Object(j.jsxs)("div",{className:"tableContainer",children:[Object(j.jsxs)("div",{className:"pageBtnContainer",children:[Object(j.jsx)("div",{className:"pageBtn",onClick:function(){I(A>1?A-1:H)},children:Object(j.jsx)(d.a,{size:30,color:"orange",className:"pageBtnIcon"})}),Object(j.jsxs)(T.a,{id:"dropdown-basic-button",align:"end",title:"Language",children:[Object(j.jsx)(R.a.Item,{className:"languageDropdown",onClick:function(){return r("English")},children:"English"}),Object(j.jsx)(R.a.Item,{className:"languageDropdown",onClick:function(){return r("Hindi")},children:"Hindi"})]}),Object(j.jsxs)(T.a,{id:"dropdown-basic-button",align:"end",title:"Sort By",children:[Object(j.jsx)(R.a.Item,{className:"languageDropdown",onClick:function(){return c("name")},children:"Name"}),Object(j.jsx)(R.a.Item,{className:"languageDropdown",onClick:function(){return c("artist")},children:"Artist"}),g?Object(j.jsx)(R.a.Item,{className:"languageDropdown",onClick:function(){return c("user")},children:"Your Rating"}):null,Object(j.jsx)(R.a.Item,{className:"languageDropdown",onClick:function(){return c("average")},children:"Top Rating"})]}),Object(j.jsx)("div",{className:"pageBtn",onClick:function(){I(A<H?A+1:1)},children:Object(j.jsx)(d.b,{size:30,color:"orange",className:"pageBtnIcon"})})]}),Object(j.jsx)("div",{className:"row",children:E?P:J})]}),Object(j.jsx)("div",{className:"parent",children:Object(j.jsx)(k,{click:p,setClick:x,data:E?i[p]:y[p],dataArr:a,updateRating:b,user:g})})]})},z=function(){return Object(j.jsx)("section",{className:"about",children:Object(j.jsx)("div",{className:"aboutUsContainer",children:Object(j.jsxs)("div",{className:"innerContainer",children:[Object(j.jsx)("h1",{children:"About Us"}),Object(j.jsx)("p",{className:"text",children:"Goodlistens provides the top rated songs for you. It provides you with the details for Artists, Album name, rating given by other Listeners."}),Object(j.jsx)("p",{className:"text",children:"If you wanna listen to your favourite song just click on the headphone button which directly takes you to spotify web to enjoy your music."}),Object(j.jsx)("h2",{children:"Connect Us On"}),Object(j.jsxs)("div",{className:"container-fluid",children:[Object(j.jsx)(d.c,{className:"icons",size:30}),Object(j.jsx)(d.d,{className:"icons",size:30}),Object(j.jsx)(d.h,{className:"icons",size:30})]})]})})})},E=t(19),G=t(82),H=t.n(G),U=t(100),J=t.n(U);var P=function(){var e=Object(n.useState)([]),a=Object(u.a)(e,2),t=a[0],s=a[1],c=Object(n.useState)([]),r=Object(u.a)(c,2),i=r[0],d=r[1],b=Object(n.useState)(null),g=Object(u.a)(b,2),m=g[0],h=g[1],N=Object(n.useState)(""),v=Object(u.a)(N,2),y=v[0],k=v[1],w=Object(n.useState)("English"),S=Object(u.a)(w,2),B=S[0],T=S[1],R=Object(n.useState)("name"),G=Object(u.a)(R,2),U=G[0],P=G[1],V="e92ebaa8a3d1456fb1ab78acfe75fec7",X=function(){var e=Object(o.a)(l.a.mark((function e(a){var t,n,c,r,i,o,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y.replace(/ /g,"%20"),"track","US","12","0",n="https://api.spotify.com/v1/search?q=".concat(t,"&type=").concat("track","&market=").concat("US","&limit=").concat("12","&offset=").concat("0"),c={headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+a}},e.next=9,H.a.get(n,c);case 9:if((r=e.sent).data)for(i=r.data.tracks.limit,o=[],u=0;u<i;u++)try{o.push({id:r.data.tracks.items[u].id,name:r.data.tracks.items[u].name,album_type:r.data.tracks.items[u].album.type,album:r.data.tracks.items[u].album.name,artist:r.data.tracks.items[u].artists[0].name,image:r.data.tracks.items[u].album.images[1].url,language:"English",release_date:r.data.tracks.items[u].album.release_date,url:r.data.tracks.items[u].uri,user_rating:null}),s(o),0===y.length&&s([])}catch(l){console.log(l)}case 11:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){y.length>0&&function(){var e={headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+btoa(V+":f2cdafb887294ee1a158d5905cc89f4d")}},a={grant_type:"client_credentials",refresh_token:"AQARwB4kcc2WGbbRcpuusCC0dccDVFqSwWh7ea6ewTY5-lYsJAcV8gB0u29DAJDk__QSKOqRfTL2Zo5A_AJ0NaS157pFBhvuD2qcN8jXNc9088_K5W4hUXVLVtXxHTStO8Q",client_id:V};H.a.post("https://accounts.spotify.com/api/token",J.a.stringify(a),e).then((function(e){X(e.data.access_token)})).catch((function(e){return console.log(e)}))}()}),[y]);var Y=function(){var e=Object(o.a)(l.a.mark((function e(a){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=D.getDatabase(),Object(_.set)(Object(_.ref)(t,"spotify/"+a.id),{album:a.album_name,image:a.image,artist:a.artist,release_date:a.release_date,album_type:a.album_type,name:a.name,language:"English",url:a.url,user_rating:{}}),console.log("Data added successfully");case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),q=function(){var e=D.getDatabase(),a=D.ref(e);D.onValue(D.child(a,"spotify/"),(function(e){if(e.exists()){var a=e.val(),t=[];for(var n in a)t.push({id:n,name:a[n].name,album_type:a[n].album_type,album:a[n].album,artist:a[n].artist,image:a[n].image,language:a[n].language,release_date:a[n].release_date,url:a[n].url,user_rating:"user_rating"in a[n]?a[n].user_rating:null});switch(U){case"name":d(t.sort((function(e,a){return"".concat(e.name).localeCompare("".concat(a.name))})));break;case"artist":d(t.sort((function(e,a){return"".concat(e.artist).localeCompare("".concat(a.artist))})));break;case"user":t=t.filter((function(e){return e.user_rating&&m.uid in e.user_rating})),d(t.sort((function(e,a){return a.user_rating[m.uid]-e.user_rating[m.uid]})));break;case"average":var s=function(e){var a;if(e.user_rating){var t=Object.keys(e.user_rating).length,n=0;for(var s in e.user_rating)n+=e.user_rating[s];a=n/t}else a=0;return a};d(t.sort((function(e,a){return s(a)-s(e)})))}}else alert("No data")}))},M=function(e,a){var t=D.getDatabase(),n=D.ref(t),s={};s["spotify/"+e+"/user_rating/".concat(m.uid)]=a,D.update(n,s),q()};return Object(n.useEffect)((function(){I.onAuthStateChanged(A,(function(e){e&&h(e)}))})),Object(n.useEffect)((function(){q()}),[U]),Object(j.jsx)(f.a,{children:Object(j.jsxs)("div",{className:"container-fluid",onLoad:q,children:[Object(j.jsx)(O,{logo:x,user:m,setlang:T,login:function(){I.signInWithPopup(A,C).then((function(e){if(e.user){var a=e.user;h(a)}})),console.log(m)},logout:function(){I.signOut(A).then((function(){h(null)})),console.log(m.uid)},searchTerm:y,setSearchTerm:k}),Object(j.jsx)(E.a,{path:"/",exact:!0,render:function(){return Object(j.jsx)(L,{dataArr:i,setlang:T,filteredData:i.filter((function(e){return e.language===B})),setSortBy:P,searchResults:t,lang:B,searchTerm:y,updateRating:M,user:m,insert:Y})}}),Object(j.jsx)(E.a,{path:"/about",component:z}),Object(j.jsx)(p,{})]})})};t(149),t(150);r.a.render(Object(j.jsx)(s.a.StrictMode,{children:Object(j.jsx)(P,{})}),document.getElementById("root"))}},[[151,1,2]]]);
//# sourceMappingURL=main.fa08bf5c.chunk.js.map
(this["webpackJsonpgood-listens"]=this["webpackJsonpgood-listens"]||[]).push([[0],{150:function(e,a,t){},151:function(e,a,t){"use strict";t.r(a);var n=t(1),s=t.n(n),c=t(41),r=t.n(c),i=t(0),l=t.n(i),o=t(5),u=t(9),d=t(32),j=t(4),b=function(e){var a=e.term,t=e.setTerm;return Object(j.jsx)("div",{className:"search",children:Object(j.jsxs)("div",{className:"searchInputs",children:[Object(j.jsx)("input",{className:"searchBar",type:"text",placeholder:"Search Songs...",value:a,onChange:function(e){t(e.target.value)}}),Object(j.jsx)(d.f,{className:"searchIcon"})]})})},g=t(159),m=t(157),h=t(160),f=t(51),O=function(e){var a=e.logo,t=e.user,n=e.login,s=e.logout,c=(e.setlang,e.searchTerm),r=e.setSearchTerm;e.search;return Object(j.jsx)(g.a,{className:"navbar",bg:"dark",variant:"dark",expand:"lg",children:Object(j.jsxs)(m.a,{className:"container-fluid",children:[Object(j.jsxs)(g.a.Brand,{className:"navbar-brand",href:"/D12A_IP_GoodListens",children:[Object(j.jsx)("img",{alt:"Good Listens Logo",src:a,width:"100",height:"100",className:"d-inline-block align-center"}),"GoodListens"]}),Object(j.jsx)(g.a.Toggle,{"aria-controls":"basic-navbar-nav",className:"toggle"}),Object(j.jsx)(g.a.Collapse,{id:"basic-navbar-nav",className:"justify-content-end",children:Object(j.jsxs)(h.a,{className:"nav justify-content-end",children:[Object(j.jsx)(f.b,{className:"nav-link",to:"/D12A_IP_GoodListens",children:" Home "}),Object(j.jsx)(f.b,{className:"nav-link",to:"/D12A_IP_GoodListens/about",children:" About "}),t?Object(j.jsx)(h.a.Link,{className:"nav-link",onClick:s,children:" Sign Out "}):Object(j.jsx)(h.a.Link,{className:"nav-link",onClick:n,children:" Sign In "}),Object(j.jsx)("form",{children:Object(j.jsx)(b,{SearchBar:b,term:c,setTerm:r})})]})})]})})},p=function(){return Object(j.jsx)("div",{className:"footer",children:"D12A IP GoodListens 2021"})},x=t.p+"static/media/logo.585afbed.png",N=t(3),v=t(80),_=t.n(v),y=function(e){var a=e.click,t=e.setClick,s=e.data,c=(e.dataArr,e.updateRating),r=e.user,i=Object(n.useState)(0),l=Object(u.a)(i,2),o=l[0],b=l[1],g=Object(n.useState)(0),m=Object(u.a)(g,2),h=m[0],f=m[1],O=r?r.uid:null,p=!isNaN(a)&&s.user_rating&&O in s.user_rating?s.user_rating[O]:0,x=isNaN(a)?null:Object(j.jsx)(_.a,{count:5,onChange:function(e){if(c(s.id,e),s.user_rating?s.user_rating[O]=e:s.user_rating=Object(N.a)({},O,e),!isNaN(a)&&s.user_rating){b(Object.keys(s.user_rating).length);var t=0;for(var n in s.user_rating)t+=s.user_rating[n];f(parseFloat((t/o).toFixed(1)))}else b(0),f(0)},size:20,isHalf:!0,value:p,classNames:"react-stars"});return Object(n.useEffect)((function(){if(!isNaN(a)&&s.user_rating){b(Object.keys(s.user_rating).length);var e=0;for(var t in s.user_rating)e+=s.user_rating[t];f(parseFloat((e/o).toFixed(1)))}else b(0),f(0)}),[s,o,a]),Object(j.jsx)("div",{className:"view child",style:{display:"".concat(isNaN(a)?"none":"flex")},onClick:function(e){t(NaN)},children:Object(j.jsxs)("div",{className:"card-component",onClick:function(e){return function(e){e.stopPropagation()}(e)},children:[Object(j.jsx)("div",{className:"card-img-wrapper",children:Object(j.jsx)("img",{alt:"card-img",src:isNaN(a)?"":s.image,className:"card-img"})}),Object(j.jsxs)("div",{className:"card-text",children:[Object(j.jsxs)("div",{className:"song-header",children:[Object(j.jsxs)("h2",{children:[" ",isNaN(a)?"":s.name," "]}),Object(j.jsxs)("h5",{children:[" Artist - ",Object(j.jsx)("span",{className:"greyscale",children:isNaN(a)?"":s.artist})," "]}),Object(j.jsxs)("h5",{children:[" Album - ",Object(j.jsx)("span",{className:"greyscale",children:isNaN(a)?"":s.album}),"  "]}),Object(j.jsxs)("h5",{children:[" Release Date - ",Object(j.jsx)("span",{className:"greyscale",children:isNaN(a)?"":s.release_date}),"  "]})]}),Object(j.jsxs)("div",{className:"ratings",children:[Object(j.jsxs)("div",{className:"rating-wrapper",children:[Object(j.jsx)("p",{children:"Your Rating:"}),r?Object(j.jsx)("div",{children:x}):Object(j.jsx)("p",{className:"sign-in-warning",children:"Sign In to rate"})]}),Object(j.jsxs)("div",{className:"rating-wrapper",children:[Object(j.jsx)("p",{children:" Overall Rating: "}),Object(j.jsx)(_.a,{count:1,size:20,edit:!1,value:1,className:"react-star"}),Object(j.jsxs)("p",{children:[h," (",o,")"]})]})]}),Object(j.jsx)("a",{href:isNaN(a)?"/":s.url,children:Object(j.jsx)("div",{className:"play-icon-wrapper",children:Object(j.jsx)(d.e,{className:"play-icon"})})})]})]})})},k=t(42),w=t(81),A=t(74);w.initializeApp({apiKey:"AIzaSyAet6gHh72xSAlXNXUHejyTZzybRwe8L4M",authDomain:"good-listens-2885b.firebaseapp.com",projectId:"good-listens-2885b",storageBucket:"good-listens-2885b.appspot.com",messagingSenderId:"41185449889",appId:"1:41185449889:web:ffa9d80c9b4adc8d33dde0",measurementId:"G-3YP60LP1M1"});var S=new A.GoogleAuthProvider,C=A.getAuth(),D=A,I=k,B=t(161),L=t(158),T=t(101),R=function(e){for(var a=e.dataArr,t=e.searchTerm,s=e.filteredData,c=e.setSortBy,r=e.setlang,i=e.searchResults,b=e.updateRating,g=e.user,m=Object(n.useState)(NaN),h=Object(u.a)(m,2),f=h[0],O=h[1],p=Object(n.useState)([]),x=Object(u.a)(p,2),N=x[0],v=x[1],_=Object(n.useState)(1),w=Object(u.a)(_,2),A=w[0],S=w[1],C=Object(n.useState)(!1),D=Object(u.a)(C,2),R=D[0],G=D[1],z=[],E=0;E<a.length;E++)z.push(a[E].id);var P=s.length%8===0?s.length/8:Math.round(s.length/8)+1,H=function(){var e=Object(o.a)(l.a.mark((function e(a){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=I.getDatabase(),Object(k.set)(Object(k.ref)(t,"spotify/"+a.id),{album:a.album,image:a.image,artist:a.artist,release_date:a.release_date,album_type:a.album_type,name:a.name,language:"undefined",url:a.url,user_rating:{}}),console.log("Data added successfully");case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){""===t&&0===t.length?G(!1):t.length>0&&G(!0)}),[t]);var U=N.map((function(e,a){return Object(j.jsx)("div",{className:"col-md-3",children:Object(j.jsxs)(B.a,{onClick:function(){O(a)},children:[Object(j.jsx)(B.a.Img,{variant:"top",src:e.image}),Object(j.jsx)(B.a.Body,{className:"bg-dark card-body",children:Object(j.jsx)(B.a.Title,{className:"center card-tile",children:e.name})})]})},a)})),F=i.map((function(e,t){return Object(j.jsx)("div",{className:"col-md-3",children:Object(j.jsxs)(B.a,{onClick:function(){return function(e,t){if(O(t),z.includes(e.id)){console.log("Data is already in Database");for(var n=0;n<a.length;n++)a[n].id===e.id&&(e.user_rating=a[n].user_rating)}else console.log("Data not in database"),H(e)}(e,t)},children:[Object(j.jsx)(B.a.Img,{variant:"top",src:e.image}),Object(j.jsx)(B.a.Body,{className:"bg-dark card-body",children:Object(j.jsx)(B.a.Title,{className:"center card-title",children:e.name})})]})},t)})),J=function(e){S(1),r(e)},V=function(e){S(1),c(e)};return Object(n.useEffect)((function(){v(s.slice(8*(A-1),8*(A-1)+8))}),[A,s]),Object(j.jsxs)("div",{className:"container-fluid bodyContainer",children:[Object(j.jsxs)("div",{className:"tableContainer",children:[Object(j.jsxs)("div",{className:"pageBtnContainer",children:[Object(j.jsx)("div",{className:"pageBtn",onClick:function(){S(A>1?A-1:P)},children:Object(j.jsx)(d.a,{size:30,color:"orange",className:"pageBtnIcon"})}),Object(j.jsxs)(L.a,{id:"dropdown-basic-button",align:"end",title:"Language",children:[Object(j.jsx)(T.a.Item,{className:"languageDropdown",onClick:function(){return J("English")},children:"English"}),Object(j.jsx)(T.a.Item,{className:"languageDropdown",onClick:function(){return J("Hindi")},children:"Hindi"})]}),Object(j.jsx)("div",{className:"pageNumber",children:A}),Object(j.jsxs)(L.a,{id:"dropdown-basic-button",align:"end",title:"Sort By",children:[Object(j.jsx)(T.a.Item,{className:"languageDropdown",onClick:function(){return V("name")},children:"Name"}),Object(j.jsx)(T.a.Item,{className:"languageDropdown",onClick:function(){return V("artist")},children:"Artist"}),g?Object(j.jsx)(T.a.Item,{className:"languageDropdown",onClick:function(){return V("user")},children:"Your Rating"}):null,Object(j.jsx)(T.a.Item,{className:"languageDropdown",onClick:function(){return V("average")},children:"Top Rating"})]}),Object(j.jsx)("div",{className:"pageBtn",onClick:function(){S(A<P?A+1:1)},children:Object(j.jsx)(d.b,{size:30,color:"orange",className:"pageBtnIcon"})})]}),Object(j.jsx)("div",{className:"row",children:R?F:U})]}),Object(j.jsx)("div",{className:"parent",children:Object(j.jsx)(y,{click:f,setClick:O,data:R?i[f]:N[f],dataArr:a,updateRating:b,user:g})})]})},G=function(){return Object(j.jsx)("section",{className:"about",children:Object(j.jsx)("div",{className:"aboutUsContainer",children:Object(j.jsxs)("div",{className:"innerContainer",children:[Object(j.jsx)("h1",{children:"About Us"}),Object(j.jsx)("p",{className:"text",children:"Goodlistens provides the top rated songs for you. It provides you with the details for Artists, Album name, rating given by other Listeners."}),Object(j.jsx)("p",{className:"text",children:"If you wanna listen to your favourite song just click on the headphone button which directly takes you to spotify web to enjoy your music."}),Object(j.jsx)("h2",{children:"Contact Us On"}),Object(j.jsxs)("div",{className:"container-fluid",children:[Object(j.jsx)("a",{href:"https://github.com/Anurag-Saraswat-01/D12A_IP_GoodListens",target:"_blank",rel:"noopener noreferrer",style:{color:"white"},children:Object(j.jsx)(d.d,{className:"icons",size:30})}),Object(j.jsx)(d.c,{className:"icons",size:30}),Object(j.jsx)(d.g,{className:"icons",size:30})]})]})})})},z=t(19),E=t(82),P=t.n(E),H=t(100),U=t.n(H);var F=function(){var e=Object(n.useState)([]),a=Object(u.a)(e,2),t=a[0],s=a[1],c=Object(n.useState)([]),r=Object(u.a)(c,2),i=r[0],d=r[1],b=Object(n.useState)(null),g=Object(u.a)(b,2),m=g[0],h=g[1],N=Object(n.useState)(""),v=Object(u.a)(N,2),_=v[0],y=v[1],w=Object(n.useState)("English"),A=Object(u.a)(w,2),B=A[0],L=A[1],T=Object(n.useState)("name"),E=Object(u.a)(T,2),H=E[0],F=E[1],J="e92ebaa8a3d1456fb1ab78acfe75fec7",V=function(){var e=Object(o.a)(l.a.mark((function e(a){var t,n,c,r,i,o,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=_.replace(/ /g,"%20"),"track","US","12","0",n="https://api.spotify.com/v1/search?q=".concat(t,"&type=").concat("track","&market=").concat("US","&limit=").concat("12","&offset=").concat("0"),c={headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+a}},e.next=9,P.a.get(n,c);case 9:if((r=e.sent).data)for(i=r.data.tracks.limit,o=[],u=0;u<i;u++)try{o.push({id:r.data.tracks.items[u].id,name:r.data.tracks.items[u].name,album_type:r.data.tracks.items[u].album.type,album:r.data.tracks.items[u].album.name,artist:r.data.tracks.items[u].artists[0].name,image:r.data.tracks.items[u].album.images[1].url,language:"English",release_date:r.data.tracks.items[u].album.release_date,url:r.data.tracks.items[u].uri,user_rating:null}),s(o),0===_.length&&s([])}catch(l){console.log(l)}case 11:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){_.length>0&&function(){var e={headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+btoa(J+":f2cdafb887294ee1a158d5905cc89f4d")}},a={grant_type:"client_credentials",refresh_token:"AQARwB4kcc2WGbbRcpuusCC0dccDVFqSwWh7ea6ewTY5-lYsJAcV8gB0u29DAJDk__QSKOqRfTL2Zo5A_AJ0NaS157pFBhvuD2qcN8jXNc9088_K5W4hUXVLVtXxHTStO8Q",client_id:J};P.a.post("https://accounts.spotify.com/api/token",U.a.stringify(a),e).then((function(e){V(e.data.access_token)})).catch((function(e){return console.log(e)}))}()}),[_]);var X=function(){var e=Object(o.a)(l.a.mark((function e(a){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=I.getDatabase(),Object(k.set)(Object(k.ref)(t,"spotify/"+a.id),{album:a.album_name,image:a.image,artist:a.artist,release_date:a.release_date,album_type:a.album_type,name:a.name,language:"English",url:a.url,user_rating:{}}),console.log("Data added successfully");case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),Y=function(){var e=I.getDatabase(),a=I.ref(e);I.onValue(I.child(a,"spotify/"),(function(e){if(e.exists()){var a=e.val(),t=[];for(var n in a)t.push({id:n,name:a[n].name,album_type:a[n].album_type,album:a[n].album,artist:a[n].artist,image:a[n].image,language:a[n].language,release_date:a[n].release_date,url:a[n].url,user_rating:"user_rating"in a[n]?a[n].user_rating:null});switch(H){case"name":d(t.sort((function(e,a){return"".concat(e.name).localeCompare("".concat(a.name))})));break;case"artist":d(t.sort((function(e,a){return"".concat(e.artist).localeCompare("".concat(a.artist))})));break;case"user":t=t.filter((function(e){return e.user_rating&&m.uid in e.user_rating})),d(t.sort((function(e,a){return a.user_rating[m.uid]-e.user_rating[m.uid]})));break;case"average":var s=function(e){var a;if(e.user_rating){var t=Object.keys(e.user_rating).length,n=0;for(var s in e.user_rating)n+=e.user_rating[s];a=n/t}else a=0;return a};d(t.sort((function(e,a){return s(a)-s(e)})))}}else alert("No data")}))},q=function(e,a){var t=I.getDatabase(),n=I.ref(t),s={};s["spotify/"+e+"/user_rating/".concat(m.uid)]=a,I.update(n,s),Y()};return Object(n.useEffect)((function(){D.onAuthStateChanged(C,(function(e){e&&h(e)}))})),Object(n.useEffect)((function(){Y()}),[H]),Object(j.jsx)(f.a,{children:Object(j.jsxs)("div",{className:"container-fluid",onLoad:Y,children:[Object(j.jsx)(O,{logo:x,user:m,setlang:L,login:function(){D.signInWithPopup(C,S).then((function(e){if(e.user){var a=e.user;h(a)}}))},logout:function(){D.signOut(C).then((function(){h(null)}))},searchTerm:_,setSearchTerm:y}),Object(j.jsx)(z.a,{path:"/D12A_IP_GoodListens",exact:!0,render:function(){return Object(j.jsx)(R,{dataArr:i,setlang:L,filteredData:i.filter((function(e){return e.language===B})),setSortBy:F,searchResults:t,searchTerm:_,updateRating:q,user:m,insert:X})}}),Object(j.jsx)(z.a,{path:"/D12A_IP_GoodListens/about",component:G}),Object(j.jsx)(p,{})]})})};t(149),t(150);r.a.render(Object(j.jsx)(s.a.StrictMode,{children:Object(j.jsx)(F,{})}),document.getElementById("root"))}},[[151,1,2]]]);
//# sourceMappingURL=main.3679bf7b.chunk.js.map